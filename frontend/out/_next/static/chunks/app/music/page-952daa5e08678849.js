(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{4982:(e,t,s)=>{Promise.resolve().then(s.bind(s,5329))},5329:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),c=s(8173),l=s.n(c),n=s(5565),i=s(2651);let o="http://stillframe.local:5000",d="".concat("http://stillframe.local:3000","/music/callback");function p(){let[e,t]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[p,u]=(0,r.useState)(""),[f,m]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async function(){try{let e=(await i.A.get("".concat(o,"/api/setting/SPOTIFY"))).data.result;e.CLIENT_ID&&e.CLIENT_SECRET&&(t(e.CLIENT_ID),c(e.CLIENT_SECRET),u(e.REFRESH_TOKEN),m(e.ACCESS_TOKEN))}catch(e){console.error("Error fetching Spotify settings:",e)}})()},[]),(0,r.useEffect)(()=>{let t=async()=>{try{await i.A.post("".concat(o,"/api/setting/SPOTIFY"),{CLIENT_ID:e,CLIENT_SECRET:s,REFRESH_TOKEN:p,ACCESS_TOKEN:f})}catch(e){console.error("Error saving Spotify settings:",e)}};e&&s&&t()},[f,e,s,p]),(0,a.jsx)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:(0,a.jsxs)("main",{className:"flex flex-col gap-8 row-start-2 items-center items-start",children:[(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("nav",{className:"breadcrumb",children:[(0,a.jsx)(l(),{href:"/",children:"Home"})," / ",(0,a.jsx)("span",{children:"Music"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"clientId",children:"Spotify Client ID:"}),(0,a.jsx)("input",{type:"text",id:"clientId",name:"clientId",value:e,onChange:e=>t(e.target.value),className:"border-b p-2 mb-4 w-full"}),(0,a.jsx)("label",{htmlFor:"clientSecret",children:"Spotify Client Secret:"}),(0,a.jsx)("input",{type:"password",id:"clientSecret",name:"clientSecret",value:s,onChange:e=>c(e.target.value),placeholder:"********",className:"border-b p-2 mb-4 w-full"}),(0,a.jsxs)("button",{onClick:()=>{window.location.href="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(e,"&redirect_uri=").concat(d,"&response_type=code&scope=").concat("user-read-private user-read-email user-read-playback-state user-modify-playback-state user-read-currently-playing")},className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full flex items-center",children:[(0,a.jsx)(n.default,{src:"/images/spotify.svg",alt:"Spotify",width:24,height:24,className:"mr-2"}),"Connect to Spotify"]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,565,441,587,358],()=>t(4982)),_N_E=e.O()}]);