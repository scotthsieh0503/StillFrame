(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{4961:(e,t,l)=>{"use strict";l.d(t,{default:()=>r});var s=l(5155),a=l(2115),c=l(5565),n=l(2651);function r(e){let{folder:t}=e,[l,r]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[h,d]=(0,a.useState)([]),u="http://stillframe.local:5000";(0,a.useEffect)(()=>{n.A.get("".concat(u,"/api/image/").concat(t)).then(e=>{i(e.data.result)}).catch(e=>{console.error("Error fetching photos:",e)})},[]);let p=e=>{e.length>0&&e.forEach(e=>{let l=new FormData;l.append("file",e),n.A.post("".concat(u,"/api/image/").concat(t,"/upload"),l).then(e=>{i(t=>{let l=e.data.result;return t.includes(l)?t:[...t,l]}),r([]),console.log("Upload successful:",e.data)}).catch(e=>{console.error("Error uploading file:",e)})})},f=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files);r(t),p(t)}},style:{display:"none"},id:"fileInput"}),0===l.length&&(0,s.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer",children:"Upload images"}),o.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",className:"mr-1 mb-4",onChange:e=>{e.target.checked?d(o):d([])},checked:h.length===o.length&&o.length>0}),"Select All"]}),h.length>0&&(0,s.jsx)("button",{className:"float-right",onClick:()=>{h.length>0&&h.forEach(e=>{n.A.delete(e).then(t=>{i(t=>t.filter(t=>t!==e)),d(t=>t.filter(t=>t!==e)),console.log("Delete successful:",t.data)}).catch(e=>{console.error("Error deleting photo:",e)})})},children:"Delete"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mt-4",children:o.map(e=>(0,s.jsxs)("div",{className:"flex justify-center items-center cursor-pointer",onClick:()=>f(e),children:[(0,s.jsx)("input",{type:"checkbox",checked:h.includes(e),onChange:()=>f(e),className:"mr-1"}),(0,s.jsx)(c.default,{src:e,width:90,height:90,alt:"Uploaded photo",quality:30,className:"w-32 h-32 object-cover rounded-md",unoptimized:!0})]},e))})]})]})}},7761:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,8173,23)),Promise.resolve().then(l.bind(l,4961))}},e=>{var t=t=>e(e.s=t);e.O(0,[651,565,441,587,358],()=>t(7761)),_N_E=e.O()}]);